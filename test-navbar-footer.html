<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙØ­Øµ Navbar Ùˆ Footer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }
        .pass {
            background: #d4edda;
            color: #155724;
        }
        .fail {
            background: #f8d7da;
            color: #721c24;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ÙØ­Øµ Navbar Ùˆ Footer</h1>
    
    <h2>1. ÙØ­Øµ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª:</h2>
    <div id="vars-test"></div>
    
    <h2>2. ÙØ­Øµ Ø§Ù„Ù€ Placeholders:</h2>
    <div id="placeholders-test"></div>
    
    <h2>3. ÙØ­Øµ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª:</h2>
    <div id="paths-test"></div>
    
    <h2>4. ÙØ­Øµ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:</h2>
    <div id="components-test"></div>
    
    <div id="navbar-placeholder"></div>
    <div id="footer-placeholder"></div>
    
    <script>
        // Test 1: Check variables
        const varsTest = document.getElementById('vars-test');
        const result1 = document.createElement('div');
        result1.className = window.location.pathname ? 'test-result pass' : 'test-result fail';
        result1.innerHTML = `Current Path: <strong>${window.location.pathname}</strong>`;
        varsTest.appendChild(result1);
        
        // Test 2: Check placeholders
        const placeholdersTest = document.getElementById('placeholders-test');
        const navbar = document.getElementById('navbar-placeholder');
        const footer = document.getElementById('footer-placeholder');
        
        const navbarResult = document.createElement('div');
        navbarResult.className = navbar ? 'test-result pass' : 'test-result fail';
        navbarResult.innerHTML = `navbar-placeholder: ${navbar ? 'âœ… Ù…ÙˆØ¬ÙˆØ¯' : 'âŒ Ù…ÙÙ‚ÙˆØ¯'}`;
        placeholdersTest.appendChild(navbarResult);
        
        const footerResult = document.createElement('div');
        footerResult.className = footer ? 'test-result pass' : 'test-result fail';
        footerResult.innerHTML = `footer-placeholder: ${footer ? 'âœ… Ù…ÙˆØ¬ÙˆØ¯' : 'âŒ Ù…ÙÙ‚ÙˆØ¯'}`;
        placeholdersTest.appendChild(footerResult);
        
        // Test 3: Check paths calculation
        const pathsTest = document.getElementById('paths-test');
        const pathname = window.location.pathname || '';
        const pagesIndex = pathname.indexOf('/pages/');
        const prefix = pagesIndex !== -1 ? pathname.slice(0, pagesIndex + 1) : '/public/';
        const pagesBase = prefix + 'pages/';
        const assetsBase = prefix + 'assets/';
        const componentsBase = prefix + 'components/';
        
        const navUrl = componentsBase + 'navbar.html';
        const footUrl = componentsBase + 'footer.html';
        
        const pathsInfo = document.createElement('div');
        pathsInfo.className = 'test-result info';
        pathsInfo.innerHTML = `
            <p><strong>Calculated Paths:</strong></p>
            <ul>
                <li>pagesIndex: ${pagesIndex}</li>
                <li>prefix: ${prefix}</li>
                <li>pagesBase: ${pagesBase}</li>
                <li>assetsBase: ${assetsBase}</li>
                <li>componentsBase: ${componentsBase}</li>
                <li>navUrl: <strong>${navUrl}</strong></li>
                <li>footUrl: <strong>${footUrl}</strong></li>
            </ul>
        `;
        pathsTest.appendChild(pathsInfo);
        
        // Test 4: Check component loading
        const componentsTest = document.getElementById('components-test');
        
        async function testComponentLoading() {
            const results = [];
            
            try {
                const navRes = await fetch(navUrl);
                results.push({
                    name: 'navbar.html',
                    url: navUrl,
                    status: navRes.status,
                    ok: navRes.ok
                });
            } catch (e) {
                results.push({
                    name: 'navbar.html',
                    url: navUrl,
                    error: e.message
                });
            }
            
            try {
                const footRes = await fetch(footUrl);
                results.push({
                    name: 'footer.html',
                    url: footUrl,
                    status: footRes.status,
                    ok: footRes.ok
                });
            } catch (e) {
                results.push({
                    name: 'footer.html',
                    url: footUrl,
                    error: e.message
                });
            }
            
            results.forEach(r => {
                const div = document.createElement('div');
                if (r.ok) {
                    div.className = 'test-result pass';
                    div.innerHTML = `âœ… ${r.name}: ${r.url} (${r.status})`;
                } else {
                    div.className = 'test-result fail';
                    div.innerHTML = `âŒ ${r.name}: ${r.url} - ${r.error || 'HTTP ' + r.status}`;
                }
                componentsTest.appendChild(div);
            });
        }
        
        testComponentLoading();
    </script>
    <script src="/public/assets/dist/components-loader.js"></script>
</body>
</html>
